<!-- start:readme.hbs -->
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
		<title>FAQ</title>
		<link rel="icon" type="image/x-icon" href="favicon.ico"/>
		<!--[if lt IE 9]>
		<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		<link href="https://fonts.googleapis.com/css?family=PT+Mono" rel="stylesheet">
		<link type="text/css" rel="stylesheet" href="css/bootstrap.min.css">
		<link type="text/css" rel="stylesheet" href="css/prism.min.css">
		<link type="text/css" rel="stylesheet" href="css/template.min.css">
			<link type="text/css" rel="stylesheet" href="css/override.css">
			<style>
				.page-header,
				pre.code-toolbar > .toolbar:hover {
					background-color: #5611A4;
				}
				.callout-primary,
				.toc .nav > li > a:hover,
				.toc .nav > li > a:focus,
				.toc .nav > li.active > a,
				.toc .nav > li.active > a:hover,
				.toc .nav > li.active > a:focus,
				pre.code-toolbar > .toolbar:hover {
					border-left-color: #5611A4;
				}
				pre.code-toolbar > .toolbar:hover {
					border-bottom-color: #5611A4;
				}
				.callout-primary h5,
				.symbol-title.collapsible-symbol .toggle-icon,
				.breadcrumb li a,
				.toc .nav > li > a:hover,
				.toc .nav > li > a:focus,
				.toc .nav > li.active > a,
				.toc .nav > li.active > a:hover,
				.toc .nav > li.active > a:focus {
					color: #5611A4;
				}
			</style>
		<script type="text/javascript">
			window.TEMPLATE_OPTIONS = {"includeDate":true,"dateFormat":"Do MMM YYYY","systemName":"Ollie Notes","systemSummary":"A nice way to take your coding notes","systemLogo":"img/ollie.jpg","systemColor":"#5611A4","navMembers":[{"kind":"class","title":"Classes","summary":"All documented classes."},{"kind":"external","title":"Externals","summary":"All documented exteral members."},{"kind":"global","title":"Globals","summary":"All documented globals."},{"kind":"mixin","title":"Mixins","summary":"All documented mixins."},{"kind":"interface","title":"Interfaces","summary":"All documented interfaces."},{"kind":"module","title":"Modules","summary":"All documented modules."},{"kind":"namespace","title":"Namespaces","summary":"All documented namespaces."},{"kind":"tutorial","title":"Tutorials And Guides","summary":"All available tutorials."}],"footer":"","copyright":"Ollie Notes Copyright © 2019","linenums":true,"collapseSymbols":true,"inverseNav":true,"inlineNav":false,"outputSourceFiles":true,"sourceRootPath":null,"disablePackagePath":true,"outputSourcePath":false,"showTableOfContents":true,"showAccessFilter":true,"analytics":null,"methodHeadingReturns":true,"sort":"linenum, longname, version, since","search":true,"favicon":"favicon.ico","stylesheets":["css/override.css"],"scripts":[],"monospaceLinks":true,"cleverLinks":false,"default":{"staticFiles":{"paths":["./docs/static"]}},"useLongnameInNav":false,"showInheritedInNav":true,"date":false};
			window.DOCLET_TOC_ENABLED = true;
			window.DOCLET_AFILTER_ENABLED = false;
		</script>
</head>
<body>
	<!-- start:navbar.hbs -->
	<header class="navbar navbar-default navbar-fixed-top navbar-inverse">
		<div class="container">
			<div class="navbar-header">
				<a class="navbar-brand branding-logo" href="index.html" style="background-image: url(img/ollie.jpg);">
					Ollie Notes
				</a>
				<!-- displayed on small devices -->
				<button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#topNavigation">
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
			</div>
			<div class="navbar-collapse collapse" id="topNavigation">
				<ul class="nav navbar-nav">
								<li class="dropdown">
									<a href="list_tutorial.html" class="dropdown-toggle" data-toggle="dropdown">Tutorials And Guides<b class="caret"></b></a>
									<ul class="dropdown-menu">
											<li><a href="tutorial-faq.html">FAQ</a></li>
											<li><a href="tutorial-random-bugs.html">Random Bugs</a></li>
											<li><a href="tutorial-rough-notes.html">Rough Notes</a></li>
											<li><a href="tutorial-setting-up-pgadmin.html">Setting Up pgAdmin</a></li>
											<li><a href="tutorial-tech-stack-tips.html">Tech Stack Info</a></li>
									</ul>
								</li>
				</ul>
					<!-- start:lunr-search-navbar.hbs -->
					<form class="navbar-form navbar-right" role="search">
						<div class="input-group">
							<input type="text" class="form-control" placeholder="Search" id="lunr-search-input">
							<div class="input-group-btn">
								<button class="btn btn-default" id="lunr-search-submit">
									<i class="glyphicon glyphicon-search"></i>
								</button>
							</div>
						</div>
					</form>
					<!-- start:lunr-search-navbar.hbs -->		</div>
		</div>
	</header>
	<!-- end:navbar.hbs -->		<div class="page-header">
			<div class="container">
				<span class="kind">tutorial</span>
				<h1><span class="title">FAQ</span></h1>
			</div>
		</div>
	<div class="container content">
		<div class="row">
			<div class="col-md-9 main-content">
						<ol class="breadcrumb">
							<li><a href="index.html">Home</a></li>
							<li><a href="list_tutorial.html">Tutorials And Guides</a></li>
							<li class="active">FAQ</li>
						</ol>
		<section class="tutorial-section">
			<article><p>When a you jump into a new project, you tend to have a lot of questions. Some of them are big picture stuff, achitecture and stack and whatnot. But sometimes, there are just questions about random things that just pop up in the code base. Why is a file in a certain place? Was that a naming convention? Why that particular external library? This page is all about those things.</p>
<h1>What does wait-for-it.sh do?</h1><p>The issue is that when our <code>web</code> container tries to talk to our <code>db</code> to do the migrations and seeds in the kickoff script, there's
nothing happening at port 5432 yet. This is becuase docker-compose's <code>depends_on</code> will start our <code>db</code> container before <code>web</code>, but it won't wait for <code>db</code>'s postgress to acually be &quot;ready&quot; before moving on. This is a problem becuase the kickoff script will try to run the migrations and seeds immediately and hit this error:</p>
<pre class="prettyprint source lang-plaintext"><code>Error: connect ECONNREFUSED [some ip address]:5432
    at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1087:14)
Also known as: DB won't connect on start</code></pre><p>The solution (for now), is to tell those commands to hang on a second. To do this we are using a great script called <a href="https://github.com/vishnubob/wait-for-it">wait-for-it by vishnubob</a>. Basically all this script does is delay them until <code>db:5432</code> is actually ready. Here's the lines:</p>
<pre class="prettyprint source lang-docker"><code># from docker-compose.yml
command: ./scripts/wait-for-pg.sh db:5432 -- nodemon /usr/app/src/backend/server</code></pre><p>This issue is <a href="https://docs.docker.com/compose/startup-order/">discussed by docker and is called startup order</a> and you can even see the postgres image talk about this problem in the <a href="https://hub.docker.com/_/postgres">caveats section of pg's docker page</a></p>
<h1>What are the credentials on these fetch requests? (CORS side note)</h1><p>Our front and back end are on the same server becuase we want to keep auth simple and use cookies for sessions. However, fetch does not automatically include any sort of cookie data out of the box. In order to use cookies with fetch you have to do:</p>
<pre class="prettyprint source lang-js"><code>fetch('ur', {
    credentials: 'include',
    // other fetch option data
})</code></pre><h2>CORS issues</h2><p>We have not yet solved the port issue (dev uses webpack server on 3000, actual app build runs on port 8000), which is a shame becuase using cookies <em>really</em> irritates CORS . Hapi won't be able to get around it by just using <code>cors: false</code> anymore. Instead the <code>cors</code> property in the route options has to look like:</p>
<pre class="prettyprint source lang-js"><code>cors: {
    origin: ['*'],
    headers: ['Access-Control-Allow-Origin', 'Access-Control-Allow-Headers'],
    credentials: true,
},</code></pre><p>Ideally, we can remove this once we properly figure out how to use reverse proxy's for local development so we aren't going from 3000 on the front to 8000 on the back.</p></article>
		</section>
			</div>
				<div class="col-md-3 side-content">
					<nav class="toc hidden-print hidden-sm hidden-xs"></nav>
				</div>
		</div>
	</div>
	<footer>
				<div class="copyright">Ollie Notes Copyright © 2019</div>
			<div class="generated-by">Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on 22nd Apr 2019 using the <a href="https://github.com/steveush/foodoc">FooDoc template</a>.</div>
	</footer>
	<script src="js/jquery.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/clipboard.min.js"></script>
	<script src="js/prism.min.js"></script>
	<script src="js/template.min.js"></script>
		<!-- start:lunr-search-modal.hbs -->
		<div class="modal fade" id="lunr-search-modal">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title">Search results</h4>
					</div>
					<div class="modal-body" id="lunr-search-body">
					</div>
					<div class="modal-footer" id="lunr-search-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					</div>
				</div><!-- /.modal-content -->
			</div><!-- /.modal-dialog -->
		</div>
		<!-- end:lunr-search-modal.hbs -->		<script src="js/lunr.min.js"></script>
	
</body>
</html>
<!-- end:readme.hbs -->